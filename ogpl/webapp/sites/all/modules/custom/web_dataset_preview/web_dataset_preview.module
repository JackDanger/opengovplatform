<?phpfunction web_dataset_preview_menu() {	$items['embed-preview'] = array(		'page callback' => 'dataset_preview',		'page arguments' => array('embed'),		'access callback' => true,		'access arguments' => true,		'type' => MENU_NORMAL_ITEM,    );		$items['print-dataset'] = array(		'page callback' => 'dataset_preview',		'page arguments' => array('print'),		'access callback' => true,		'access arguments' => true,		'type' => MENU_NORMAL_ITEM,    );    return $items;}function dataset_preview($mode,$node_type,$node_name){	$sql = "select * from {url_alias} where dst='".addslashes($node_type)."/".addslashes($node_name)."' and 1";	$url_data = db_fetch_object(db_query($sql));	list($n,$nid) = explode("/",$url_data->src);	$node = node_load($nid);	$_GET[$mode] = 1;		$data['headline'] = $node->title;	$data['body'] = node_view($node,false,true);	$data['path'] = $node_type."/".$node_name;	$data['mode'] = $mode;	print theme('web_dataset_custom',$data);}function web_dataset_preview_theme($existing, $type, $theme, $path){	$name = variable_get('theme_default', NULL);	$path = drupal_get_path("theme", $name);	$theme = array(        'web_dataset_custom' => array(			'arguments' => array('data' => $data),            'template' => 'previewdataset',			'path' => $path,			'theme path' => $path,		)    );    return $theme;}?>